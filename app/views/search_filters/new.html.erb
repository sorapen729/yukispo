<!-- フラッシュメッセージ -->
<% flash.each do |message_type, message| %>
  <div class="alert alert-success">
    <%= message %>
  </div>
<% end %>

<!-- メイン -->
<main class="container-responsive pt-6 pb-24">
  <!-- タイトル -->
  <div class="mb-6 md:mb-8">
    <h1 class="text-slate-800 text-2xl md:text-3xl lg:text-4xl font-bold mb-4">検索条件を設定</h1>

    <!-- 出発地表示 -->
    <% if session[:origin_address] %>
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 md:p-6 mb-6">
        <div class="flex items-start gap-3">
          <div class="flex-shrink-0 mt-0.5">
            <svg class="w-5 h-5 md:w-6 md:h-6 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
          </div>
          <div class="flex-1">
            <p class="text-sm md:text-base font-medium text-blue-800 mb-1">出発地</p>
            <p class="text-blue-700 text-sm md:text-base leading-relaxed"><%= session[:origin_address]["address"] %></p>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <!-- 検索フォーム -->
  <%= form_with url: maps_path, method: :get, scope: :origin_address, local: true do |f| %>
  <div class="space-y-6 md:space-y-8">
    <!-- 距離設定 -->
    <div class="space-y-3">
      <label for="distance" class="block text-base md:text-lg font-semibold text-slate-800">
        移動距離で絞り込み
      </label>
      <div class="relative">
        <!-- 距離アイコン -->
        <svg aria-hidden="true" class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 md:w-6 md:h-6 opacity-70"
              viewBox="0 0 24 24" fill="currentColor">
          <path d="M9 11H7l3-3v2a6 6 0 0 1 0 12v-2c-2.2 0-4-1.8-4-4 0-1.1.45-2.1 1.17-2.83L9 11zm1.83 2.83c.72-.72 1.17-1.72 1.17-2.83h2c0 2.2-1.8 4-4 4v-1.17z"/>
        </svg>
        <%= f.select :distance,
              options_for_select([
                ['指定しない(開発中)', ''],
                ['5km以内', '5000'],
                ['10km以内', '10000'],
                ['50km以内', '50000'],
                ['100km以内', '100000'],
                ['200km以内', '200000'],
                ['300km以内', '300000']
              ]),
              {},
              { class: "w-full rounded-xl border border-black/10 pl-10 md:pl-12 pr-10 py-3 md:py-4 bg-white text-base md:text-lg
                        focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent
                        appearance-none cursor-pointer" } %>
        <!-- プルダウン矢印 -->
        <svg class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 md:w-6 md:h-6 opacity-70"
             viewBox="0 0 24 24" fill="currentColor">
          <path d="M7 10l5 5 5-5z"/>
        </svg>
      </div>
    </div>

    <!-- 時間設定 -->
    <div class="space-y-3">
      <label for="time" class="block text-base md:text-lg font-semibold text-slate-800">
        移動時間で絞り込み
      </label>
      <div class="relative">
        <!-- 時間アイコン -->
        <svg aria-hidden="true" class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 md:w-6 md:h-6 opacity-70"
              viewBox="0 0 24 24" fill="currentColor">
          <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"/>
        </svg>
        <%= f.select :time,
              options_for_select([
                ['指定しない(開発中)', ''],
                ['30分以内', '30'],
                ['1時間以内', '60'],
                ['2時間以内', '120'],
                ['3時間以内', '180'],
                ['4時間以内', '240']
              ]),
              {},
              { class: "w-full rounded-xl border border-black/10 pl-10 md:pl-12 pr-10 py-3 md:py-4 bg-white text-base md:text-lg
                        focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent
                        appearance-none cursor-pointer" } %>
        <!-- プルダウン矢印 -->
        <svg class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 md:w-6 md:h-6 opacity-70"
             viewBox="0 0 24 24" fill="currentColor">
          <path d="M7 10l5 5 5-5z"/>
        </svg>
      </div>
    </div>
  </div>

  <!-- 送信ボタン -->
  <div class="mt-8 md:mt-12 pt-6">
    <%= button_tag type: :submit,
          class: "btn btn-primary w-full md:w-auto",
          data: { turbo_submits_with: "検索中..." } do %>
      この条件で検索する
    <% end %>
  </div>
  <% end %>
</main>

